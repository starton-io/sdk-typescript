/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import * as utils from "../internal/utils";
import * as shared from "../sdk/models/shared";
import { Data } from "./data";
import { Ipfs } from "./ipfs";
import { Kms } from "./kms";
import { Monitor } from "./monitor";
import { Network } from "./network";
import { Project } from "./project";
import { SmartContract } from "./smartcontract";
import { SmartContractManagement } from "./smartcontractmanagement";
import { TransactionManager } from "./transactionmanager";
import { Wallet } from "./wallet";
import { Webhook } from "./webhook";
import axios from "axios";
import { AxiosInstance } from "axios";

/**
 * Contains the list of servers available to the SDK
 */
export const ServerList = ["https://api.starton.com"] as const;

/**
 * The available configuration options for the SDK
 */
export type SDKProps = {
    startonApiKey?: string;

    /**
     * Allows overriding the default axios client used by the SDK
     */
    defaultClient?: AxiosInstance;

    /**
     * Allows overriding the default server used by the SDK
     */
    serverIdx?: number;

    /**
     * Allows overriding the default server URL used by the SDK
     */
    serverURL?: string;
    /**
     * Allows overriding the default retry config used by the SDK
     */
    retryConfig?: utils.RetryConfig;
};

export class SDKConfiguration {
    defaultClient: AxiosInstance;
    security?: shared.Security | (() => Promise<shared.Security>);
    serverURL: string;
    serverDefaults: any;
    language = "typescript";
    openapiDocVersion = "1.0";
    sdkVersion = "0.3.4";
    genVersion = "2.194.1";
    userAgent = "speakeasy-sdk/typescript 0.3.4 2.194.1 1.0 @starton/sdk";
    retryConfig?: utils.RetryConfig;
    public constructor(init?: Partial<SDKConfiguration>) {
        Object.assign(this, init);
    }
}

/**
 * Starton API: Documentation: # Introduction
 *
 * @remarks
 *
 * Starton is the all-in-one WEB3 api to integrate blockchain feature inside your project.
 *
 * # Authentication
 *
 * To access API endpoints, you must provide a valid API key. You can create new
 * API keys in your [account settings](https://app.starton.com/projects/default/developer). Be
 * careful when handling your keys as they give access to all your project,
 * you should treat them like passwords and they should never be committed to
 * source control.
 *
 * To authenticate with API, you can supply the API key as a header
 * (`x-api-key: YOUR_API_KEY`).
 *
 * Some API endpoints allow unauthenticated requests for public resources and
 * they can be called without an API key.
 *
 * # Errors
 *
 * All successful API requests will be returned with a 200 or 201 status code.
 *  If there’s an error while making the
 * request, the appropriate status code is returned with the error message:
 *
 * ```
 * {
 * 	"statusCode": 401,
 * 	"errorCode": "NOT_AUTHENTICATED",
 * 	"message": "Not authenticated",
 * 	"timestamp": "2023-10-14T00:12:22.470Z",
 * 	"path": "/v3/project",
 * 	"context": {},
 * }
 * ```
 *
 * # Pagination
 *
 * Most top-level API resources have support for `getAll` API methods. For instance,
 * you can list smart contracts, webhooks, templates etc. These list methods share
 * common parameters, taking both `limit` and `page`.
 *
 * Responses will be in the root `meta` and `items` key. For example:
 *
 * ```
 * {
 * 	data: […],
 * 	meta: {
 * 		itemCount: 10,
 * 		totalItems: 50,
 * 		itemsPerPage: 10,
 * 		totalPages: 5
 * 		currentPage: 1
 * 	}
 * }
 * ```
 *
 *
 * # Rate limits
 *
 * Depending on your plan, you will benefit from a specific rate limit.
 *
 * | Plan      | Rate limit               |
 * |-----------|--------------------------|
 * | Free      | 50 requests/min          |
 * | Developer | 100 requests/min         |
 * | Business  | up to 10000 requests/min |
 *
 */
export class Starton {
    /**
     * Starton Blockchain data endpoints.
     */
    public data: Data;
    /**
     * Starton wallet service
     */
    public wallet: Wallet;
    /**
     * IPFS allows users to host and receive content in a manner similar to BitTorrent. As opposed to a centrally located server, IPFS is built around a decentralized system creating a resilient system of file storage and sharing. Starton IPFS storage service acts as a liaison between the IPFS protocol and you, with a user-friendly interface that lets you pin or upload files as you would any other storage service. You get all the benefits of hosting your content on the protocol while still having the easy process of uploading it.
     */
    public ipfs: Ipfs;
    /**
     * Starton kms service
     */
    public kms: Kms;
    /**
     * Starton Transaction Manager. Handle nonce issue, gas management, rebroadcasting etc.
     */
    public transactionManager: TransactionManager;
    /**
     * Get all available network, or add your custom one (enterprise only)
     */
    public network: Network;
    public project: Project;
    /**
     * The Smart contract management is an abstraction on top of our **Transaction Manager** and it allow you to build and automate your smart contract transaction easily, without struggling with the ABI and params encoding. With it you can:
     *
     * @remarks
     * - **Deploying smart contract:** Deploy **audited** contract from our library or your own smart contract
     * - **Import existing contract:** Import existing contract to view them on your dashboard and interact with them.
     * - **Interact:** Read state and interact with the smart contract previously deployed or imported
     */
    public smartContractManagement: SmartContractManagement;
    public smartContract: SmartContract;
    /**
     * The list of conditions that trigger a watcher event
     */
    public monitor: Monitor;
    /**
     * Manage all the webhook you receive inside your app
     */
    public webhook: Webhook;

    private sdkConfiguration: SDKConfiguration;

    constructor(props?: SDKProps) {
        let serverURL = props?.serverURL;
        const serverIdx = props?.serverIdx ?? 0;

        if (!serverURL) {
            serverURL = ServerList[serverIdx];
        }

        const defaultClient = props?.defaultClient ?? axios.create();
        this.sdkConfiguration = new SDKConfiguration({
            defaultClient: defaultClient,
            security: new shared.Security({ startonApiKey: props?.startonApiKey }),

            serverURL: serverURL,
            retryConfig: props?.retryConfig,
        });

        this.data = new Data(this.sdkConfiguration);
        this.wallet = new Wallet(this.sdkConfiguration);
        this.ipfs = new Ipfs(this.sdkConfiguration);
        this.kms = new Kms(this.sdkConfiguration);
        this.transactionManager = new TransactionManager(this.sdkConfiguration);
        this.network = new Network(this.sdkConfiguration);
        this.project = new Project(this.sdkConfiguration);
        this.smartContractManagement = new SmartContractManagement(this.sdkConfiguration);
        this.smartContract = new SmartContract(this.sdkConfiguration);
        this.monitor = new Monitor(this.sdkConfiguration);
        this.webhook = new Webhook(this.sdkConfiguration);
    }
}
